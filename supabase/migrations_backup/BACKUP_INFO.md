# ğŸ“¦ Migration å‚™ä»½èªªæ˜

**å‚™ä»½æ™‚é–“**: 2025-10-21  
**åŸå› **: åˆä½µæ··äº‚çš„ä¾†å›ä¿®æ­£ migrations

---

## ğŸ“ å‚™ä»½å…§å®¹

é€™å€‹ç›®éŒ„åŒ…å«åŸå§‹çš„ 10+ å€‹ migration æª”æ¡ˆï¼Œå®ƒå€‘æ˜¯å°ˆæ¡ˆé–‹ç™¼éç¨‹ä¸­ä¾†å›ä¿®æ­£çš„ç‰ˆæœ¬ï¼š

```
000_create_base_tables.sql              - å»ºç«‹åŸºç¤è¡¨
001_create_trip_gear_table.sql          - å»ºç«‹é—œè¯è¡¨
002_add_trip_slug.sql                   - æ–°å¢ slug æ¬„ä½
003_seed_initial_data.sql               - æ¸¬è©¦è³‡æ–™
004_setup_rls_policies.sql              - RLS æ”¿ç­–
005_add_gear_dashboard_title.sql        - æ–°å¢æ¬„ä½ï¼ˆå¾Œä¾†ç§»åˆ° profilesï¼‰
006_auto_create_profile.sql             - Auto profile triggerï¼ˆèˆŠç‰ˆï¼‰
007_fix_profiles_table.sql              - ä¿®æ­£ profiles
008_setup_profiles_rls.sql              - Profiles RLS
009_move_dashboard_title_to_profiles.sql - ç§»å‹•æ¬„ä½
010_auto_create_profile_trigger.sql     - Auto profile triggerï¼ˆæ–°ç‰ˆï¼‰
```

---

## âš ï¸ æ³¨æ„äº‹é …

**é€™äº›æª”æ¡ˆåƒ…ä¾›åƒè€ƒï¼Œä¸æœƒè¢«åŸ·è¡Œï¼**

ç¾åœ¨æ‰€æœ‰ migrations å·²åˆä½µç‚ºå–®ä¸€æª”æ¡ˆï¼š
```
../migrations/001_init_complete_schema.sql
```

---

## ğŸ” ç‚ºä»€éº¼åˆä½µï¼Ÿ

åŸå§‹çš„ migrations æœ‰ä»¥ä¸‹å•é¡Œï¼š
1. âŒ ä¾†å›ä¿®æ­£ï¼ˆå¦‚ 005 æ–°å¢æ¬„ä½ï¼Œ009 åˆç§»å‹•æ¬„ä½ï¼‰
2. âŒ é‡è¤‡çš„ trigger å®šç¾©ï¼ˆ006 å’Œ 010ï¼‰
3. âŒ æ¸¬è©¦è³‡æ–™èˆ‡ schema ä¸ç¬¦ï¼ˆ003 ä½¿ç”¨èˆŠçš„æ¬„ä½åç¨±ï¼‰
4. âŒ åŸ·è¡Œé †åºæ··äº‚

åˆä½µå¾Œçš„å¥½è™•ï¼š
1. âœ… å–®ä¸€æª”æ¡ˆï¼Œæ¸…æ™°æ˜ç¢º
2. âœ… æ²’æœ‰é‡è¤‡æˆ–è¡çª
3. âœ… æ¸¬è©¦è³‡æ–™èˆ‡ schema ä¸€è‡´
4. âœ… ç¶­è­·æ›´å®¹æ˜“

---

## ğŸ—‘ï¸ å¯ä»¥åˆªé™¤å—ï¼Ÿ

**å»ºè­°ä¿ç•™**ï¼ŒåŸå› ï¼š
- è¨˜éŒ„å°ˆæ¡ˆé–‹ç™¼æ­·ç¨‹
- æœªä¾†å¯èƒ½éœ€è¦åƒè€ƒæŸäº›é‚è¼¯
- ä½”ç”¨ç©ºé–“ä¸å¤§ï¼ˆç¸½å…±ç´„ 50KBï¼‰

å¦‚æœç¢ºå®šä¸éœ€è¦ï¼Œå¯ä»¥åˆªé™¤æ•´å€‹ `migrations_backup/` ç›®éŒ„ã€‚

---

**æ•´ç†å®Œæˆï¼ç¾åœ¨å°ˆæ¡ˆçš„ migrations æ¸…æ™°ä¹¾æ·¨äº†ï¼** ğŸ‰

